{"ast":null,"code":"import _slicedToArray from\"/Users/deepak/Downloads/Assignment/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import*as d3 from\"d3\";import data from\"./data.json\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ScheduleChart=function ScheduleChart(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),selectedDate=_useState2[0],setSelectedDate=_useState2[1];// Filter data based on the selected date and count the number of scheduled meals for each time slot\nvar counts=data.reduce(function(acc,_ref){var schedule_time=_ref.schedule_time,slot=_ref.slot,item_date=_ref.item_date;if(item_date===selectedDate){var time=d3.timeFormat(\"%I %p\")(new Date(schedule_time));acc[time]=acc[time]||{L:0,D:0};acc[time][slot]++;}return acc;},{});// Create a bar chart using D3.js\nuseEffect(function(){var margin={top:20,right:20,bottom:30,left:40};var width=600-margin.left-margin.right;var height=400-margin.top-margin.bottom;var svg=d3.select(\"#chart\").append(\"svg\").attr(\"width\",width+margin.left+margin.right).attr(\"height\",height+margin.top+margin.bottom).append(\"g\").attr(\"transform\",\"translate(\".concat(margin.left,\",\").concat(margin.top,\")\"));var x=d3.scaleBand().range([0,width]).padding(0.1).domain(Object.keys(counts));var y=d3.scaleLinear().range([height,0]).domain([0,d3.max(Object.values(counts).map(function(_ref2){var L=_ref2.L,D=_ref2.D;return L+D;}))]);svg.append(\"g\").attr(\"transform\",\"translate(0,\".concat(height,\")\")).call(d3.axisBottom(x));svg.append(\"g\").call(d3.axisLeft(y));svg.selectAll(\".bar\").data(Object.entries(counts)).enter().append(\"rect\").attr(\"class\",\"bar\").attr(\"x\",function(_ref3){var _ref4=_slicedToArray(_ref3,1),time=_ref4[0];return x(time)||0;}).attr(\"y\",function(_ref5){var _ref6=_slicedToArray(_ref5,2),_ref6$=_ref6[1],L=_ref6$.L,D=_ref6$.D;return y(L+D);}).attr(\"width\",x.bandwidth()).attr(\"height\",function(_ref7){var _ref8=_slicedToArray(_ref7,2),_ref8$=_ref8[1],L=_ref8$.L,D=_ref8$.D;return height-y(L+D);}).attr(\"fill\",function(_ref9){var _ref9$=_ref9[1],L=_ref9$.L,D=_ref9$.D;return L>0&&D>0?\"orange\":L>0?\"green\":D>0?\"blue\":\"gray\";});},[counts]);// Render a date selector and update the chart on selection change\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"select\",{value:selectedDate,onChange:function onChange(e){return setSelectedDate(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a date\"}),Array.from(new Set(data.map(function(_ref10){var item_date=_ref10.item_date;return item_date;}))).map(function(date){return/*#__PURE__*/_jsx(\"option\",{value:date,children:date},date);})]}),/*#__PURE__*/_jsx(\"div\",{id:\"chart\"})]});};export default ScheduleChart;","map":{"version":3,"names":["React","useState","useEffect","d3","data","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ScheduleChart","props","_useState","_useState2","_slicedToArray","selectedDate","setSelectedDate","counts","reduce","acc","_ref","schedule_time","slot","item_date","time","timeFormat","Date","L","D","margin","top","right","bottom","left","width","height","svg","select","append","attr","concat","x","scaleBand","range","padding","domain","Object","keys","y","scaleLinear","max","values","map","_ref2","call","axisBottom","axisLeft","selectAll","entries","enter","_ref3","_ref4","_ref5","_ref6","_ref6$","bandwidth","_ref7","_ref8","_ref8$","_ref9","_ref9$","children","value","onChange","e","target","Array","from","Set","_ref10","date","id"],"sources":["/Users/deepak/Downloads/Assignment/src/ScheduleChart.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport * as d3 from \"d3\";\nimport data from \"./data.json\";\n\nconst ScheduleChart = (props) => {\n  const [selectedDate, setSelectedDate] = useState(\"\");\n\n  // Filter data based on the selected date and count the number of scheduled meals for each time slot\n  const counts = data.reduce((acc, { schedule_time, slot, item_date }) => {\n    if (item_date === selectedDate) {\n      const time = d3.timeFormat(\"%I %p\")(new Date(schedule_time));\n      acc[time] = acc[time] || { L: 0, D: 0 };\n      acc[time][slot]++;\n    }\n    return acc;\n  }, {});\n  // Create a bar chart using D3.js\n  useEffect(() => {\n    const margin = { top: 20, right: 20, bottom: 30, left: 40 };\n    const width = 600 - margin.left - margin.right;\n    const height = 400 - margin.top - margin.bottom;\n    const svg = d3\n      .select(\"#chart\")\n      .append(\"svg\")\n      .attr(\"width\", width + margin.left + margin.right)\n      .attr(\"height\", height + margin.top + margin.bottom)\n      .append(\"g\")\n      .attr(\"transform\", `translate(${margin.left},${margin.top})`);\n\n    const x = d3\n      .scaleBand()\n      .range([0, width])\n      .padding(0.1)\n      .domain(Object.keys(counts));\n\n    const y = d3\n      .scaleLinear()\n      .range([height, 0])\n      .domain([0, d3.max(Object.values(counts).map(({ L, D }) => L + D))]);\n\n    svg\n      .append(\"g\")\n      .attr(\"transform\", `translate(0,${height})`)\n      .call(d3.axisBottom(x));\n\n    svg.append(\"g\").call(d3.axisLeft(y));\n\n    svg\n      .selectAll(\".bar\")\n      .data(Object.entries(counts))\n      .enter()\n      .append(\"rect\")\n      .attr(\"class\", \"bar\")\n      .attr(\"x\", ([time]) => x(time) || 0)\n      .attr(\"y\", ([, { L, D }]) => y(L + D))\n      .attr(\"width\", x.bandwidth())\n      .attr(\"height\", ([, { L, D }]) => height - y(L + D))\n      .attr(\"fill\", ({ [1]: { L, D } }) =>\n        L > 0 && D > 0 ? \"orange\" : L > 0 ? \"green\" : D > 0 ? \"blue\" : \"gray\"\n      );\n  }, [counts]);\n\n  // Render a date selector and update the chart on selection change\n  return (\n    <>\n      <select\n        value={selectedDate}\n        onChange={(e) => setSelectedDate(e.target.value)}\n      >\n        <option value=\"\">Select a date</option>\n        {Array.from(new Set(data.map(({ item_date }) => item_date))).map(\n          (date) => (\n            <option key={date} value={date}>\n              {date}\n            </option>\n          )\n        )}\n      </select>\n      <div id=\"chart\"></div>\n    </>\n  );\n};\n\nexport default ScheduleChart;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}